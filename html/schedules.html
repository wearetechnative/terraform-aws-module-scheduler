
<!DOCTYPE html>
<html>
<head>
  <title>API Gateway Example</title>
  <style>
    /* Table styles */
    table {
      width: 100%;
      border-collapse: collapse; /* Makes sure borders between cells are combined */
    }
    th, td {
      border: 1px solid black; /* Adds borders to each cell */
      padding: 8px;  /* Adds space inside each cell */
      text-align: left; /* Aligns text to the left */
    }
    th {
      background-color: #f2f2f2; /* Light gray background for header cells */
    }
  </style>
</head>

<body>
  <h1 style="background-color:grey;">Create New Schedules</h1>
  <label for="dynamodb">Below are the schedules:</label>
  <ol id="s_list"></ol><br>
  <button id="schedule_button"></button>
  <table>
   <tr>
      <th>Schedules</th>
      <th>Periods</th>  
      <th>Days</th>
      <th>BeginTime</th>
      <th>EndTime</th>
      <th>TimeZone</th>
      <th>Add/Remove Schedules</th>
    </tr>
   <tr>
   <td rowspan="3">Foodscheduler</td>
   <td>Lunch</td>
   <td>"mon"</td>
   <td>"12:00"</td>
   <td>"4:00"</td>
   <td>"Europe/Amsterdam"</td>
   <td rowspan=3> <input type="button" value="Delete" onclick="deleteRow(this)"/> </td>
   </tr> 
   <tr>
   <td>Dinner</td>
   <td>"mon"</td>
   <td>"12:00"</td>
   <td>"4:00"</td>
   <td>"Europe/Amsterdam"</td>
   </tr>
   
  <tbody id="table-body">
   </tbody>
</table><br>
<script>
 function list_schedule(){
     fetch('https://4lp5tvm67d.execute-api.eu-central-1.amazonaws.com/db')
     .then(response => response.json())
     .then(data => {
              data.schedules_list.forEach(function(id) {
               schedule = id
               console.log(schedule)
               create_tableRow(schedule)
              });
     })
     }
 function create_tableRow(data){
   schedule = data
   list_period(schedule)
   
   const tableBody = document.getElementById('table-body');
   const row = document.createElement('tr');
   const nameCell = document.createElement('td');
   nameCell.textContent = data;
   nameCell.rowspan = "3";
   row.appendChild(nameCell);
   tableBody.appendChild(row);
   }
 function list_period(data){
       schedule = data
       
       fetch('https://4lp5tvm67d.execute-api.eu-central-1.amazonaws.com/db/list_periods', {
        method: "POST", // Or GET with query params
        body: schedule,
        headers: {
          "Content-Type": "application/json"
        }
      })
      
      .then(response => response.json())
     // .then(data => response)
      .catch(error => console.error('Error checking schedule:', error));
    
     
    }  
   
 list_schedule()
 
 </script>
 </body>
 </html>
 


